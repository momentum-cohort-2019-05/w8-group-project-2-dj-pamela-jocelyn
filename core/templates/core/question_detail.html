{% extends "base.html" %}

{% block content %}
    <h1>{{ question.title }}</h1>
    <p>
        by {{ question.user.username }}
    </p>
    <p>
        {{ question.body }}
    </p>

    <h2>Answers</h2>
    {% if request.user.is_authenticated %}
        <a href="{% url 'answer_create' question.pk%}" >write an answer</a>
    {% endif %}

    {% if question.answer_set.all %}
        {% for answer in question.answer_set.all %}
            <hr>
            <div>
                {{ answer.user.username }}:
                <p>
                    {{ answer.body }}
                </p>
                {% if question.user == request.user %}
                    {% if not answer.correct %}
                        <a class="mark-answer-correct-link" data-answer-pk="{{ answer.pk }}" href="{% url 'answer_correct' answer.pk %}">mark as correct</a>
                    {% else %}
                        <span>answer marked as correct</span>
                    {% endif %}
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>no answers yet!</p>
    {% endif %}
{% endblock %}